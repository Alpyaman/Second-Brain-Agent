// Generated by Second Brain Agent
// Migration: create_blog_tables
// Date: 2025-12-08 14:02:42

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  username String @unique
  email String @unique
  password_hash String
  first_name String?
  last_name String?
  is_active Boolean? @default(true)
  is_admin Boolean? @default(false)
  created_at DateTime? @default(now())
  updated_at DateTime?

  @@index([email])
}

model Post {
  id Int @id @default(autoincrement())
  title String
  slug String @unique
  content String?
  excerpt String?
  user_id   user @relation(fields: [user_idId], references: [id])
  published Boolean? @default(false)
  view_count Int? @default(0)
  created_at DateTime? @default(now())
  updated_at DateTime?

  @@index([title])
}

model Comment {
  id Int @id @default(autoincrement())
  post_id   post @relation(fields: [post_idId], references: [id])
  user_id   user @relation(fields: [user_idId], references: [id])
  content String
  approved Boolean? @default(false)
  created_at DateTime? @default(now())
}

model Tag {
  id Int @id @default(autoincrement())
  name String @unique
  slug String @unique
  created_at DateTime? @default(now())
}

